OCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <title>Prolog –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f4f7fa;
      margin: 40px;
      color: #2c3e50;
    }

    h2, h3 {
      color: #34495e;
    }

    input[type="file"], button {
      padding: 10px 15px;
      margin-right: 10px;
      border-radius: 6px;
      border: none;
      background-color: #3498db;
      color: white;
      cursor: pointer;
      font-size: 14px;
    }

    input[type="file"] {
      background-color: #ecf0f1;
      color: #333;
      border: 2px dashed #ccc;
      transition: border-color 0.3s ease;
    }

    input[type="file"]:hover {
      border-color: #3498db;
    }

    button:hover {
      background-color: #2980b9;
    }

    #output {
      margin-top: 30px;
      background-color: #ffffff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      font-family: monospace;
      white-space: pre-wrap;
      line-height: 1.6;
    }

    .fact { color: darkred; }
    .rule { color: darkblue; }
    .comment { color: green; }

    section {
      margin-top: 40px;
      padding: 20px;
      background-color: #eaf2f8;
      border-left: 5px solid #3498db;
      border-radius: 8px;
    }

    ul {
      margin-top: 10px;
      padding-left: 20px;
    }

    code {
      background: #ecf0f1;
      padding: 2px 5px;
      border-radius: 4px;
    }
  </style>
</head>
<body>

  <h2>üß† Prolog –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä</h2>
  <input type="file" id="fileInput" accept=".pl">
  <button id="loadExample">–ó–∞—Ä–µ–¥–∏ –ø—Ä–∏–º–µ—Ä</button>
  <button id="clearBtn">–ò–∑—á–∏—Å—Ç–∏</button>

  <div id="output"></div>

  <section>
    <h3>üìò –ö–∞–∫–≤–æ –ø—Ä–∞–≤–∏ —Ç–æ–∑–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç?</h3>
    <p>–¢–æ–∑–∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ç–∏ –ø–æ–∑–≤–æ–ª—è–≤–∞ –¥–∞ –∫–∞—á–∏—à <strong>Prolog —Ñ–∞–π–ª (.pl)</strong> –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:</p>
    <ul>
      <li>üìå –†–∞–∑–¥–µ–ª—è <strong>—Ñ–∞–∫—Ç–∏—Ç–µ</strong> (–Ω–∞–ø—Ä. <code>likes(john, pizza).</code>)</li>
      <li>‚öôÔ∏è –ò–∑–≤–ª–∏—á–∞ <strong>–ø—Ä–∞–≤–∏–ª–∞</strong> —Å –ª–æ–≥–∏—á–µ—Å–∫–∏ –≤—Ä—ä–∑–∫–∏ (<code>:-</code>)</li>
      <li>üí¨ –ü–æ–∫–∞–∑–≤–∞ <strong>–∫–æ–º–µ–Ω—Ç–∞—Ä–∏</strong> –æ—Ç –∫–æ–¥–∞ (—Ä–µ–¥–æ–≤–µ, –∑–∞–ø–æ—á–≤–∞—â–∏ —Å <code>%</code>)</li>
    </ul>
    <p>–¶–µ–ª—Ç–∞ –µ –±—ä—Ä–∑ –∞–Ω–∞–ª–∏–∑ –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –Ω–∞ Prolog –∫–æ–¥ –±–µ–∑ –Ω—É–∂–¥–∞ –æ—Ç –∏–Ω—Å—Ç–∞–ª–∞—Ü–∏—è –Ω–∞ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–µ–Ω —Å–æ—Ñ—Ç—É–µ—Ä.</p>
  </section>

  <section>
    <h3>üí° –°—ä–≤–µ—Ç–∏ –∑–∞ –ø–∏—Å–∞–Ω–µ –Ω–∞ Prolog –∫–æ–¥</h3>
    <ul>
      <li><strong>1. –ò–∑–ø–æ–ª–∑–≤–∞–π –æ–ø–∏—Å–∞—Ç–µ–ª–Ω–∏ –∏–º–µ–Ω–∞:</strong> –í–º–µ—Å—Ç–æ <code>p(X, Y)</code>, –∏–∑–ø–æ–ª–∑–≤–∞–π <code>parent(X, Y)</code> ‚Äì —Ç–∞–∫–∞ –∫–æ–¥—ä—Ç —Å–µ —á–µ—Ç–µ –ø–æ-–ª–µ—Å–Ω–æ.</li>
      
      <li><strong>2. –ö–æ–º–µ–Ω—Ç–∏—Ä–∞–π –ª–æ–≥–∏–∫–∞—Ç–∞:</strong> –ò–∑–ø–æ–ª–∑–≤–∞–π <code>%</code>, –∑–∞ –¥–∞ –ø–æ—è—Å–Ω—è–≤–∞—à –∫–∞–∫–≤–æ –ø—Ä–∞–≤–∏ –≤—Å—è–∫–æ –ø—Ä–∞–≤–∏–ª–æ –∏–ª–∏ —Ñ–∞–∫—Ç ‚Äì —Ç–æ–≤–∞ –ø–æ–º–∞–≥–∞ –ø—Ä–∏ –ø–æ–¥–¥—Ä—ä–∂–∫–∞ –∏ —Ä–∞–±–æ—Ç–∞ –≤ –µ–∫–∏–ø.</li>
      
      <li><strong>3. –ü—Ä–æ–≤–µ—Ä—è–≤–∞–π —Ç–æ—á–∫–∏—Ç–µ:</strong> –ù–µ –∑–∞–±—Ä–∞–≤—è–π <code>.</code> –≤ –∫—Ä–∞—è –Ω–∞ –≤—Å–µ–∫–∏ —Ñ–∞–∫—Ç –∏–ª–∏ –ø—Ä–∞–≤–∏–ª–æ ‚Äì –ª–∏–ø—Å–∞—Ç–∞ —ù —á–µ—Å—Ç–æ –≤–æ–¥–∏ –¥–æ –≥—Ä–µ—à–∫–∏!</li>
    </ul>
  </section>

  <script>
    const fileInput = document.getElementById('fileInput');
    const outputDiv = document.getElementById('output');
    const clearBtn = document.getElementById('clearBtn');
    const loadExampleBtn = document.getElementById('loadExample');

    function analyze(content) {
      const lines = content.split('\n');
      const facts = [];
      const rules = [];
      const comments = [];

      lines.forEach(line => {
        const trimmed = line.trim();
        if (trimmed.startsWith('%')) {
          comments.push('<span class="comment">' + trimmed + '</span>');
        } else if (trimmed.includes(':-')) {
          rules.push('<span class="rule">' + trimmed + '</span>');
        } else if (trimmed && trimmed.endsWith('.')) {
          facts.push('<span class="fact">' + trimmed + '</span>');
        }
      });

      const output = `
<strong>üìÇ –ê–Ω–∞–ª–∏–∑ –Ω–∞ Prolog —Ñ–∞–π–ª:</strong><br><br>
<strong>üî¥ –§–∞–∫—Ç–∏ (${facts.length}):</strong><br>${facts.join('<br>')}<br><br>
<strong>üîµ –ü—Ä–∞–≤–∏–ª–∞ (${rules.length}):</strong><br>${rules.join('<br>')}<br><br>
<strong>üü¢ –ö–æ–º–µ–Ω—Ç–∞—Ä–∏ (${comments.length}):</strong><br>${comments.join('<br>')}
`;
      outputDiv.innerHTML = output;
    }

    fileInput.addEventListener('change', function(event) {
      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(e) {
        analyze(e.target.result);
      };
      reader.readAsText(file);
    });

    clearBtn.addEventListener('click', () => {
      fileInput.value = "";
      outputDiv.innerHTML = "";
    });

    loadExampleBtn.addEventListener('click', () => {
      const exampleProlog = `
% –ü—Ä–∏–º–µ—Ä–µ–Ω Prolog –∫–æ–¥
parent(john, mary).
parent(mary, alice).

grandparent(X, Y) :- parent(X, Z), parent(Z, Y).

% –¢–æ–≤–∞ –µ –∫–æ–º–µ–Ω—Ç–∞—Ä
likes(alice, chocolate).
happy(X) :- likes(X, chocolate).
      `;
      analyze(exampleProlog);
    });
  </script>

</body>
